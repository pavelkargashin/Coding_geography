<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Bali Environmental GIS</title>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="./materialize/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="./materialize/js/materialize.min.js"></script>
  </head>
  <body>
    <nav class="nav-extended">
      <div class="nav-wrapper container">
        <ul id="nav-mobile" class="center">
          <li><a href="index.html">Initialize</a></li>
          <li><a href="maintain.html">Maintain</a></li>
          <li class="active"><a href="analyse.html">Analyse</a></li>
          <li><a href="info.html">Info</a></li>
        </ul>
      </div>
      <div class="nav-content container">
        <ul class="tabs tabs-transparent">
          <li class="tab"><a href="#test1">Options</a></li>
        </ul>
      </div>
    </nav>
    <div class="container" style="min-height: 400px">
  
  
  
  
      <h4>Select data for analysis</h4>
  
      <div class="row">
  
  
        <div class="input-field col s6">
          <select id="year">
            <option value="" disabled selected>Choose your option</option>
            <option value="2009">2009</option>
            <option value="2012">2012</option>
            <option value="2013">2013</option>
            <option value="2014">2014</option>
            <option value="2015">2015</option>
            <option value="2016">2016</option>
            <option value="2017">2017</option>
          </select>
          <label>Year</label>
        </div>
  
        <div class="col s6">
          <form action="#">
            <label>Environment</label>
            <p>
              <span>
                <label>
                  <input class="with-gap" name="area" type="radio" value="Sungai" onclick="Radio()" checked />
                  <span>Sungai</span>
                </label>
              </span>
              <span style="margin-left: 50px">
                <label>
                  <input class="with-gap" name="area" type="radio" value="Sumur"  onclick="Radio()"/>
                  <span>Sumur</span>
                </label>
              </span>
            </p>
          </form>
        </div>
  
  
      </div>
  
  
      <div class="row">
  
  
        <div class="input-field col s6">
          <select id="region">
            <option value="" disabled selected>Choose your option</option>
            <option value="Regency">Regency</option>
            <option value="Basin">Basin</option>
          </select>
          <label>Area Division</label>
        </div>
  
        <div class="input-field col s6">
          <select id="stat">
            <option value="" disabled selected>Choose your option</option>
            <option value="MAX">MAX</option>
            <option value="MEAN">MEAN</option>
            <option value="MIN">MIN</option>
            <option value="COUNT">COUNT</option>
          </select>
          <label>Statistics</label>
        </div>
  
  
      </div>
  
      <div class="row">
  
  
        <div class="input-field col s6">
          <select id="s_Sungai" class="chem">
            <option value="" disabled selected>Choose your option</option>
            <option value="Temperatur">Temperatur</option>
            <option value="pH">pH</option>
            <option value="DHL_MosCm">DHL_MosCm</option>
            <option value="TDS_mgL">TDS_mgL</option>
            <option value="TSS_mgL">TSS_mgL</option>
            <option value="DO_mgL">DO_mgL</option>
            <option value="BOD_mgL">BOD_mgL</option>
            <option value="COD_mgL">COD_mgL</option>
            <option value="NO2_N_mgL">NO2_N_mgL</option>
            <option value="NO3_N_mgL">NO3_N_mgL</option>
            <option value="NH3_N_mgL">NH3_N_mgL</option>
            <option value="FreeChlori">FreeChlori</option>
            <option value="TotalP_mgL">TotalP_mgL</option>
            <option value="Phenol_mgL">Phenol_mgL</option>
            <option value="OilAndFat_">OilAndFat_</option>
            <option value="Detergent_">Detergent_</option>
            <option value="FecalColif">FecalColif</option>
            <option value="TotalColif">TotalColif</option>
            <option value="Cyanide_mg">Cyanide_mg</option>
            <option value="Sulfide_mg">Sulfide_mg</option>
            <option value="Turbidity_">Turbidity_</option>
            <option value="Cd_mgL">Cd_mgL</option>
            <option value="Fe_mgL">Fe_mgL</option>
            <option value="PO4_mgL">PO4_mgL</option>
            <option value="SO4_mgL">SO4_mgL</option>
            <option value="Pb_mgL">Pb_mgL</option>
            <option value="Mn_mgL">Mn_mgL</option>
            <option value="Zn_mgL">Zn_mgL</option>
            <option value="Cr_mgL">Cr_mgL</option>
          </select>
          <label>Chemistry Sungai</label>
        </div>
  
        <div class="input-field col s6">
          <select id="s_Sumur" class="chem" disabled>
            <option value="" disabled selected>Choose your option</option>
            <option value="Temperatur">Temperatur</option>
            <option value="TDS_mgL">TDS_mgL</option>
            <option value="TSS_mgL">TSS_mgL</option>
            <option value="pH">pH</option>
            <option value="BOD_mgL">BOD_mgL</option>
            <option value="COD_mgL">COD_mgL</option>
            <option value="DO_mgL">DO_mgL</option>
            <option value="TotalP_mgL">TotalP_mgL</option>
            <option value="NO3_N_mgL">NO3_N_mgL</option>
            <option value="NH3_N_mgL">NH3_N_mgL</option>
            <option value="As_mgL">As_mgL</option>
            <option value="Co_mgL">Co_mgL</option>
            <option value="Ba_mgL">Ba_mgL</option>
            <option value="B_mgL">B_mgL</option>
            <option value="Cd_mgL">Cd_mgL</option>
            <option value="Cr_V_mgLI">Cr_V_mgLI</option>
            <option value="Cu_mgL">Cu_mgL</option>
            <option value="Fe_mgL">Fe_mgL</option>
            <option value="Pb_mgL">Pb_mgL</option>
            <option value="Mn_mgL">Mn_mgL</option>
            <option value="Hg_mgL">Hg_mgL</option>
            <option value="Zn_mgL">Zn_mgL</option>
            <option value="Chloride_m">Chloride_m</option>
            <option value="Cyanide_mg">Cyanide_mg</option>
            <option value="Fluoride_m">Fluoride_m</option>
            <option value="NO2_N_mgL">NO2_N_mgL</option>
            <option value="Sulphate_m">Sulphate_m</option>
            <option value="FreeChlori">FreeChlori</option>
            <option value="Sulfide_mg">Sulfide_mg</option>
            <option value="Salinity_m">Salinity_m</option>
            <option value="FecalColif">FecalColif</option>
            <option value="TotalColif">TotalColif</option>
            <option value="Gloss_A_mg">Gloss_A_mg</option>
            <option value="Gloss_B_mg">Gloss_B_mg</option>
            <option value="DHL_mgL">DHL_mgL</option>
            <option value="Phenol_mgL">Phenol_mgL</option>
            <option value="OilAndFat_">OilAndFat_</option>
            <option value="Detergent_">Detergent_</option>
            <option value="PO4_mgL">PO4_mgL</option>
            <option value="Turbidity_">Turbidity_</option>
          </select>
          <label>Chemistry Sumur</label>
        </div>
  
  
      </div>
  
      <a class="waves-effect waves-light red lighten-1 btn" onclick="SubmitData()">Submit</a>
  
      <p id="test"></p>
  
    </div>


    

    <script>
      M.AutoInit();
      // You can also require other files to run in this process
      require('./renderer.js')
      let pyshell = require('python-shell')
    </script>

    <script>
      function Radio(){
        var checkedValue
        var uncheckedValue
        var radios = document.getElementsByName("area")

        for (var i = 0, length = radios.length; i < length; i++) {
          if (radios[i].checked) {
            // do whatever you want with the checked radio
            checkedValue = radios[i].value
          } else {
            uncheckedValue = radios[i].value
          }
        }
        
        document.getElementById("s_" + checkedValue).disabled = false
        document.getElementById("s_" + uncheckedValue).disabled = true
        document.getElementById("s_" + uncheckedValue).value = ""

        M.AutoInit()  // Re-init select elements with new properties
      }

      function SubmitData() {
        var region
        var env
        var stat
        var year
        var chem
        
        region = document.getElementById("region").value
        stat = document.getElementById("stat").value
        year = document.getElementById("year").value

        // env =
        var radios = document.getElementsByName("area")
        for (var i = 0, length = radios.length; i < length; i++) {
          if (radios[i].checked) {
            // do whatever you want with the checked radio
            env = radios[i].value

            // only one radio can be logically checked, don't check the rest
            break;
          }
        }

        chem = document.getElementById("s_Sungai").value + document.getElementById("s_Sumur").value
        
        var parameters = [region, env, stat, year, chem]
        toast_text = "The map's parameters are " + parameters.join(", ")
        M.toast({html: toast_text})

        let pyOptions = {
          args: [region, env, stat, year, chem]
        }
        // pyshell.PythonShell.run('./resources/python_scripts/Maps_Window_Regionalisation.py', pyOptions, function(err, results) {  // production
        pyshell.PythonShell.run('./python_scripts/Maps_Window_Regionalisation.py', pyOptions, function (err, results) {  // development
          if (err) throw err
          var toast_text = "Map is made successfully"
          M.toast({ html: toast_text })
        })
      }
    </script>
  </body>
</html>
